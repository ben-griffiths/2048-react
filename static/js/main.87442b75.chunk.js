(this["webpackJsonp2048-react"]=this["webpackJsonp2048-react"]||[]).push([[0],{58:function(e,t,n){},59:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(10),s=n.n(a),i=(n(58),n(5)),o=n(86),u=n(85),d=(n(59),n(24)),l=n(28),j=n(18),b=n(38),f=n(81),O=n(87),h=n(40),m=n.n(h),v=n(2),x=Object(f.a)({box:{display:"flex",position:"absolute",justifyContent:"center",alignItems:"center",width:"23%",height:"23%",margin:"1%",borderRadius:"10%",transition:"all 100ms linear"}}),g=function(e){return e.toString().concat("%")},y=function(e){var t=x(),n=e.items,r=e.id,a=e.type,s=e.deadItems,o=e.setDeadItems,u=Object(c.useState)(null),d=Object(i.a)(u,2),l=d[0],b=d[1];Object(c.useEffect)((function(){var e;switch(a){case"dead":b("red"),setTimeout((function(){var e=Object(j.a)({},s);delete e[r],o(e)}),100);break;case"blank":b("darkgrey");break;default:b("blue"),e=setTimeout((function(){b("white")}),100)}return function(){clearTimeout(e)}}),[a,s,r,b,o]);var f=Object(i.a)(n[r],3),h=f[0],y=f[1],p=f[2],S=g(25*h),I=g(25*y);return Object(v.jsx)(O.a,{bgcolor:l,className:m()(t.box,t.fadeIn),style:{top:I,left:S},children:"blank"===a?null:Object(v.jsxs)("h1",{style:{fontSize:"7vw"},children:[" ",p," "]})})},p=function(e){return Math.floor(Math.random()*e)},S=function(){return p(1e6)},I=function e(t,n){return t===n||t instanceof Array&&n instanceof Array&&t.length===n.length&&t.every((function(t,c){return e(t,n[c])}))},w=function(e){return Object(l.a)(Array(e).keys())},k=37,C=38,F=39,D=40,B=function(e){return JSON.parse(JSON.stringify(e))},T=n(45),N=n(82),P=Object(T.a)({palette:{primary:{main:"#fff3e0",contrastText:"#6d4c41"},secondary:{main:"#9e9e9e",contrastText:"#000"},background:{default:"#fff3e0"}}});function z(e){return Object(v.jsx)(N.a,{theme:P,children:e.children})}var E=Object(f.a)({box:{width:"100%",maxWidth:"80vh",paddingBottom:"min(100%, 80vh - 35px)",marginTop:"10px",marginBottom:"10px",position:"relative",border:"0.5vw solid ".concat(P.palette.secondary.main),background:P.palette.secondary.main,borderRadius:"3%"}}),G=function(){for(var e={},t=function(t){return e=t},n=0;n<2;n++)R(e,t);return e},M=function(e,t){var n,c=Object(b.a)(t);try{for(c.s();!(n=c.n()).done;){var r=n.value;if(e[0]===r[0]&&e[1]===r[1])return!0}}catch(a){c.e(a)}finally{c.f()}return!1},R=function(e,t){var n;do{n=[p(4),p(4)]}while(M(n,Object.values(e)));t(Object(j.a)(Object(j.a)({},e),{},Object(d.a)({},S(),[].concat(Object(l.a)(n),[Math.random()<.9?2:4]))))},A=function(e,t,n,c){t(Object(j.a)(Object(j.a)({},e),{},Object(d.a)({},n,c)))},J=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[[],[],[],[]],c=0,r=Object.entries(B(e));c<r.length;c++){var a=Object(i.a)(r[c],2),s=a[0],o=a[1];n[o[t?0:1]].push([s,o])}for(var u=0;u<4;u++)n[u].sort((function(e,n){return e[1][t?1:0]-n[1][t?1:0]}));return n},L=function(e,t){for(var n=t.items,c=t.setItems,r=t.score,a=t.setScore,s=t.deadItems,o=t.setDeadItems,u=t.setPreviousItems,d=t.setPreviousScore,j=["left","right"].includes(e)?0:1,b=r,f=J(n,1===j),O={},h=0;h<f.length;h++){var m=f[h];m.sort((function(e,t){return e[1][j]-t[1][j]}));for(var v=1;v<m.length;v++)m[v][1][2]===m[v-1][1][2]&&(m[v][1][2]=2*m[v][1][2],b+=m[v][1][2],A.apply(void 0,[s,o].concat(Object(l.a)(m[v-1]))),m.splice(v-1,1));["right","down"].includes(e)&&m.reverse();for(var x=0;x<m.length;x++){var g=Object(i.a)(m[x],2),y=g[0],p=g[1],S=["right","down"].includes(e)?3-x:x;O[y]=[],O[y][1-j]=h,O[y][j]=S,O[y][2]=p[2]}}I(Object.values(O),Object.values(n))||(u(n),d(r),a(b),setTimeout((function(){R(O,c)}),1))},H=function(e){var t=E(),n=e.items,r=e.deadItems,a=e.setDeadItems,s=e.setGameOver,o=Object(c.useState)(function(){for(var e={},t=0;t<16;t++)e[S()]=[t%4,Math.floor(t/4),0];return e}()),u=Object(i.a)(o,1)[0];return Object(c.useEffect)((function(){(function(e){var t,n=J(e,!0),c=Object(b.a)(n);try{for(c.s();!(t=c.n()).done;)if(t.value.length<4)return!1}catch(v){c.e(v)}finally{c.f()}for(var r=0,a=Object.values(e);r<a.length;r++)for(var s=a[r],o=Object(i.a)(s,3),u=o[0],d=o[1],l=o[2],j=0,f=[[u-1,d],[u+1,d],[u,d-1],[u,d+1]];j<f.length;j++){var O=Object(i.a)(f[j],2),h=O[0],m=O[1];if(w(4).includes(h)&&w(4).includes(m)&&n[h][m][1][2]===l)return!1}return!0})(n)&&setTimeout((function(){s(!0)}),400)}),[n,s]),Object(v.jsx)("div",{style:{width:"100%"},children:Object(v.jsxs)("div",{className:t.box,onAnimationEnd:R,children:[Object.keys(u).map((function(e){return Object(v.jsx)(y,{items:u,type:"blank",id:e},e)})),Object.keys(r).map((function(e){return Object(v.jsx)(y,{items:r,id:e,type:"dead",deadItems:r,setDeadItems:a},e)})),Object.keys(n).map((function(e){return Object(v.jsx)(y,{items:n,id:e},e)}))]})})},K=n(88),W=n(83),q=n(84),Q=Object(f.a)({container:{display:"flex",flexDirection:"column",width:"100%"},header:{display:"flex",width:"100%",justifyContent:"flex-end",margin:"10px"},actionBar:{display:"flex",width:"100%",justifyContent:"flex-end"},box:{marginLeft:"10px",padding:"12px",background:"grey",borderRadius:"10px",color:"white",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}}),U=function(e){var t=Q(),n=e.title,c=e.score;return Object(v.jsxs)("div",{className:t.box,children:[Object(v.jsx)("h3",{style:{fontSize:"1.5vw",margin:"0"},children:n}),Object(v.jsx)("h2",{style:{fontSize:"2.5vw",margin:"0"},children:c})]})},V=function(e){var t=e.score,n=e.resetBoardFunc,c=e.highScore,r=e.undoFunc,a=Q();return Object(v.jsxs)("div",{className:a.container,children:[Object(v.jsxs)("div",{className:a.header,children:[Object(v.jsx)("h1",{style:{margin:"0 auto 0 0",fontSize:"min(6vw, 60px)"},children:"2048-React"}),Object(v.jsx)(U,{title:"Score",score:t}),Object(v.jsx)(U,{title:"Highscore",score:c})]}),Object(v.jsxs)("div",{className:a.actionBar,children:[Object(v.jsx)(K.a,{variant:"contained",color:"secondary",onClick:r,children:Object(v.jsx)(W.a,{style:{color:"white"}})}),Object(v.jsx)(K.a,{variant:"contained",color:"secondary",onClick:n,style:{marginLeft:"10px"},children:Object(v.jsx)(q.a,{style:{color:"white"}})})]})]})},X=n(89),Y=function(e){var t=e.gameOver,n=e.setGameOver,c=e.undoFunc,r=e.resetBoardFunc;return Object(v.jsx)(X.a,{open:t,style:{zIndex:1},children:Object(v.jsxs)(u.a,{children:[Object(v.jsx)(u.a,{children:Object(v.jsx)("h1",{style:{color:"white"},children:"Game Over!"})}),Object(v.jsxs)(u.a,{children:[Object(v.jsx)(K.a,{variant:"contained",color:"secondary",style:{margin:"10px"},onClick:function(){n(!1),c()},children:Object(v.jsx)(W.a,{style:{color:"white"}})}),Object(v.jsx)(K.a,{variant:"contained",color:"secondary",style:{margin:"10px"},onClick:function(){n(!1),r()},children:Object(v.jsx)(q.a,{style:{color:"white"}})})]})]})})};var Z=function(){var e=Object(c.useState)(G()),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(0),s=Object(i.a)(a,2),d=s[0],l=s[1],j=Object(c.useState)({}),b=Object(i.a)(j,2),f=b[0],O=b[1],h=Object(c.useState)(0),m=Object(i.a)(h,2),x=m[0],g=m[1],y=Object(c.useState)(n),p=Object(i.a)(y,2),S=p[0],I=p[1],w=Object(c.useState)(d),B=Object(i.a)(w,2),T=B[0],N=B[1],P=Object(c.useState)(!1),E=Object(i.a)(P,2),M=E[0],R=E[1],J={items:n,setItems:r,score:d,setScore:l,deadItems:f,setDeadItems:O,highScore:x,setHighScore:g,previousItems:S,setPreviousItems:I,previousScore:T,setPreviousScore:N},K=function(){!function(e){for(var t=e.items,n=e.setItems,c=e.score,r=e.setScore,a=e.deadItems,s=e.setDeadItems,o=e.highScore,u=e.setHighScore,d=e.setPreviousItems,l=e.setPreviousScore,j=0,b=Object.entries(t);j<b.length;j++){var f=Object(i.a)(b[j],2),O=f[0],h=f[1];A(a,s,O,[h[0],h[1]])}o<c&&u(c),d(t),l(c),r(0),n(G())}(J)},W=function(){!function(e){var t=e.setItems,n=e.setScore,c=e.previousItems;n(e.previousScore),t(c)}(J)},q=Object(c.useRef)();return Object(c.useEffect)((function(){q.current.focus()})),Object(v.jsx)("div",{ref:q,onKeyDown:function(e){switch(e.keyCode){case k:L("left",J);break;case C:L("up",J);break;case F:L("right",J);break;case D:L("down",J)}},tabIndex:-1,style:{height:"100vh"},children:Object(v.jsxs)(z,{children:[Object(v.jsx)(o.a,{}),Object(v.jsx)(Y,{gameOver:M,setGameOver:R,resetBoardFunc:K,undoFunc:W}),Object(v.jsxs)(u.a,{container:!0,children:[Object(v.jsx)(u.a,{item:!0,xs:2}),Object(v.jsxs)(u.a,{container:!0,item:!0,xs:8,children:[Object(v.jsx)(V,{score:d,highScore:x,resetBoardFunc:K,undoFunc:W}),Object(v.jsx)(H,{items:n,deadItems:f,setDeadItems:O,setGameOver:R})]}),Object(v.jsx)(u.a,{item:!0,xs:2})]})]})})},$=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,91)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};s.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(Z,{})}),document.getElementById("root")),$()}},[[65,1,2]]]);
//# sourceMappingURL=main.87442b75.chunk.js.map