(this["webpackJsonp2048-react"]=this["webpackJsonp2048-react"]||[]).push([[0],{12:function(e,t,a){e.exports={container:"Header_container__1VC87",header:"Header_header__1VCKf",actionBar:"Header_actionBar__1RiDW",box:"Header_box__1-jsk",main_header:"Header_main_header__23YrG",refresh_button:"Header_refresh_button__j_4vX",colour_white:"Header_colour_white__2cjo3",zero_margin:"Header_zero_margin__14M5g",font_size_2_5vw:"Header_font_size_2_5vw__2_IJb",font_size_1_5vw:"Header_font_size_1_5vw__H3TpT"}},121:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(10),s=a.n(c),o=(a(94),a(11)),i=a(159),u=a(160),d=(a(95),a(164)),b=a(58),l=a.n(b),j=a(4),f=function(e){var t=e.gameOver;return Object(j.jsx)(d.a,{open:t,className:l.a.on_top,children:Object(j.jsx)("h1",{className:l.a.header,children:"Game Over!"})})},m=a(41),O=a(19),_=a(15),h=a(59),v=a(29),x=function(e){return Math.floor(Math.random()*e)},p=function(){return x(1e6)},g=function e(t,a){return t===a||t instanceof Array&&a instanceof Array&&t.length===a.length&&t.every((function(t,r){return e(t,a[r])}))},S=function(e){return Object(O.a)(Array(e).keys())},y=function(e){return e[x(e.length)]},w=37,I=38,N=39,k=40,H=function(e){return JSON.parse(JSON.stringify(e))},z=a(42),F=a.n(z),D=a(60),T=a(53),G=a.n(T);G.a.defaults.headers={Authorization:"token ".concat(atob("Z2hwX1dDdXptZDZyWm1IWldSdFpESWkzMVNVa2IwOTFBcjJCYW4wTA=="))};var C="6f5bb7add6a473c4a0a647c6e624b466",P=function(){var e=Object(D.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G.a.get("https://api.github.com/gists/".concat(C,"?").concat(p())));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(D.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G.a.patch("https://api.github.com/gists/".concat(C),t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=a(163),J=a(54),M=a.n(J),A=function(e){return e.toString().concat("%")},L=function(e){var t=e.items,a=e.id,n=e.type,c=e.deadItems,s=e.setDeadItems,i=Object(r.useState)(null),u=Object(o.a)(i,2),d=u[0],b=u[1];Object(r.useEffect)((function(){var e;switch(n){case"dead":b("red"),setTimeout((function(){var e=Object(_.a)({},c);delete e[a],s(e)}),100);break;case"blank":b(J.tileColour);break;default:b("blue"),e=setTimeout((function(){b("white")}),100)}return function(){clearTimeout(e)}}),[n,c,a,b,s]);var l=Object(o.a)(t[a],3),f=l[0],m=l[1],O=l[2],h=A(25*f),v=A(25*m);return Object(j.jsx)(E.a,{bgcolor:d,className:M.a.box,style:{top:v,left:h},children:"blank"===n?null:Object(j.jsxs)("h1",{className:M.a.text,children:[" ",O," "]})})},V=a(61),W=a.n(V),Z=function(){for(var e={},t=function(t){return e=t},a=0;a<2;a++)R(e,t);return e},q=function(e,t){var a,r=Object(h.a)(t);try{for(r.s();!(a=r.n()).done;){var n=a.value;if(e[0]===n[0]&&e[1]===n[1])return!0}}catch(c){r.e(c)}finally{r.f()}return!1},R=function(e,t){var a;do{a=[x(4),x(4)]}while(q(a,Object.values(e)));t(Object(_.a)(Object(_.a)({},e),{},Object(m.a)({},p(),[].concat(Object(O.a)(a),[Math.random()<.9?2:4]))))},Y=function(e,t,a,r){t(Object(_.a)(Object(_.a)({},e),{},Object(m.a)({},a,r)))},X=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=[[],[],[],[]],r=0,n=Object.entries(H(e));r<n.length;r++){var c=Object(o.a)(n[r],2),s=c[0],i=c[1];a[i[t?0:1]].push([s,i])}for(var u=0;u<4;u++)a[u].sort((function(e,a){return e[1][t?1:0]-a[1][t?1:0]}));return a},K=function(e,t){for(var a=t.items,r=t.setItems,n=t.score,c=t.setScore,s=t.deadItems,i=t.setDeadItems,u=t.setPreviousItems,d=t.setPreviousScore,b=["left","right"].includes(e)?0:1,l=n,j=X(a,1===b),f={},m=0;m<j.length;m++){var _=j[m];_.sort((function(e,t){return e[1][b]-t[1][b]}));for(var h=1;h<_.length;h++)_[h][1][2]===_[h-1][1][2]&&(_[h][1][2]=2*_[h][1][2],l+=_[h][1][2],Y.apply(void 0,[s,i].concat(Object(O.a)(_[h-1]))),_.splice(h-1,1));["right","down"].includes(e)&&_.reverse();for(var v=0;v<_.length;v++){var x=Object(o.a)(_[v],2),p=x[0],S=x[1],y=["right","down"].includes(e)?3-v:v;f[p]=[],f[p][1-b]=m,f[p][b]=y,f[p][2]=S[2]}}g(Object.values(f),Object.values(a))||(u(a),d(n),c(l),setTimeout((function(){R(f,r)}),1))},Q=function(e){var t=e.items,a=e.deadItems,n=e.setDeadItems,c=e.setGameOver,s=Object(r.useState)(function(){for(var e={},t=0;t<16;t++)e[p()]=[t%4,Math.floor(t/4),0];return e}()),i=Object(o.a)(s,1)[0];return Object(r.useEffect)((function(){(function(e){var t,a=X(e,!0),r=Object(h.a)(a);try{for(r.s();!(t=r.n()).done;)if(t.value.length<4)return!1}catch(_){r.e(_)}finally{r.f()}for(var n=0,c=Object.values(e);n<c.length;n++)for(var s=c[n],i=Object(o.a)(s,3),u=i[0],d=i[1],b=i[2],l=0,j=[[u-1,d],[u+1,d],[u,d-1],[u,d+1]];l<j.length;l++){var f=Object(o.a)(j[l],2),m=f[0],O=f[1];if(S(4).includes(m)&&S(4).includes(O)&&a[m][O][1][2]===b)return!1}return!0})(t)&&setTimeout((function(){c(!0)}),400)}),[t,c]),Object(j.jsx)("div",{className:W.a.container,children:Object(j.jsxs)("div",{className:W.a.box,onAnimationEnd:R,children:[Object.keys(i).map((function(e){return Object(j.jsx)(L,{items:i,type:"blank",id:e},e)})),Object.keys(a).map((function(e){return Object(j.jsx)(L,{items:a,id:e,type:"dead",deadItems:a,setDeadItems:n},e)})),Object.keys(t).map((function(e){return Object(j.jsx)(L,{items:t,id:e},e)}))]})})},U=a(152),$=a(153),ee=a(154),te=a(155),ae=a(62),re=a.n(ae),ne=a(12),ce=a.n(ne),se=function(e){var t=e.title,a=e.score;return Object(j.jsxs)("div",{className:ce.a.box,children:[Object(j.jsx)("h3",{className:re()(ce.a.font_size_1_5vw,ce.a.zero_margin),children:t}),a>-1?Object(j.jsx)("h2",{className:re()(ce.a.font_size_2_5vw,ce.a.zero_margin),children:a}):Object(j.jsx)(U.a,{className:ce.a.font_size_2_5vw})]})},oe=function(e){var t=e.score,a=e.resetBoardFunc,r=e.highScore,n=e.undoFunc;return Object(j.jsxs)("div",{className:ce.a.container,children:[Object(j.jsxs)("div",{className:ce.a.header,children:[Object(j.jsx)("h1",{className:ce.a.main_header,children:"2048-React"}),Object(j.jsx)(se,{title:"Score",score:t}),Object(j.jsx)(se,{title:"Highscore",score:r})]}),Object(j.jsxs)("div",{className:ce.a.actionBar,children:[Object(j.jsx)($.a,{variant:"contained",color:"secondary",onClick:n,children:Object(j.jsx)(ee.a,{className:ce.a.colour_white})}),Object(j.jsx)($.a,{variant:"contained",color:"secondary",onClick:a,className:ce.a.refresh_button,children:Object(j.jsx)(te.a,{className:ce.a.colour_white})})]})]})},ie=a(79),ue=a(156),de=function(e){var t=getComputedStyle(document.documentElement).getPropertyValue(e).trim();return t||"#fff"},be=Object(ie.a)({palette:{primary:{main:de("--primary-main"),contrastText:de("--primary-contrast")},secondary:{main:de("--secondary-main"),contrastText:de("--secondary-contrast")},tertiary:{main:de("--tertiary-main"),contrastText:de("--tertiary-contrast")},quaternary:{main:de("--quaternary-main")},background:{default:de("--background-default")}}});var le=function(e){return Object(j.jsx)(ue.a,{theme:be,children:e.children})},je=a(161),fe=a(157),me=a(158),Oe=a(165),_e=a(28),he=a.n(_e),ve=function(e){var t=e.leaderboard,a=e.username;return Object(j.jsxs)("div",{className:he.a.little_padding,children:[Object(j.jsx)("div",{className:he.a.header_container,children:Object(j.jsx)(je.a,{id:"standard-basic",label:"Name",InputProps:{className:he.a.colour_white},defaultValue:a})}),Object(j.jsxs)("div",{className:he.a.container,children:[Object(j.jsx)("h1",{className:he.a.header,children:"LeaderBoard"}),Object(j.jsx)(fe.a,{className:he.a.no_padding,children:t?S(t.length).map((function(e){return Object(j.jsxs)(me.a,{className:he.a.item,children:[Object(j.jsx)(Oe.a,{primary:"".concat(e+1,".")}),Object(j.jsx)(Oe.a,{primary:t[e].name,secondary:t[e].score})]})})):Object(j.jsx)(U.a,{size:"2.5vw"})})]})]})};var xe=function(){var e=Object(r.useState)(Z()),t=Object(o.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(0),s=Object(o.a)(c,2),d=s[0],b=s[1],l=Object(r.useState)({}),m=Object(o.a)(l,2),_=m[0],h=m[1],x=Object(r.useState)(-1),p=Object(o.a)(x,2),g=p[0],S=p[1],H=Object(r.useState)(a),z=Object(o.a)(H,2),F=z[0],D=z[1],T=Object(r.useState)(d),G=Object(o.a)(T,2),C=G[0],E=G[1],J=Object(r.useState)(!1),M=Object(o.a)(J,2),A=M[0],L=M[1],V=Object(r.useState)(null),W=Object(o.a)(V,2),q=W[0],R=W[1],X=Object(r.useState)(null),U=Object(o.a)(X,2),$=U[0],ee=U[1],te=Object(r.useState)(function(){var e=[v.c,v.f,v.e],t=[[],[v.b],[v.d]],a=v.a.generate({min:100,max:999}),r=[].concat(Object(O.a)(y(t)),[y(e),a]);return Object(v.g)({dictionaries:r,separator:"",style:"capital"}).replace(/ /g,"")}()),ae=Object(o.a)(te,1)[0];Object(r.useEffect)((function(){P().then((function(e){var t=parseInt(e.data.files["Highscore.txt"].content);t>g&&S(t);var a=JSON.parse(e.data.files["Leaderboard.json"].content);ee(a)}))}),[g,q]),Object(r.useEffect)((function(){q||setInterval((function(){R(new Date)}),5e3)}),[q,R]);var re={items:a,setItems:n,score:d,setScore:b,deadItems:_,setDeadItems:h,highScore:g,setHighScore:S,previousItems:F,setPreviousItems:D,previousScore:C,setPreviousScore:E,leaderboard:$,username:ae,setGameOver:L},ne=function(){!function(e){for(var t=e.items,a=e.setItems,r=e.score,n=e.setScore,c=e.deadItems,s=e.setDeadItems,i=e.highScore,u=e.setHighScore,d=e.setPreviousItems,b=e.setPreviousScore,l=e.username,j=e.setGameOver,f=0,m=Object.entries(t);f<m.length;f++){var _=Object(o.a)(m[f],2),h=_[0],v=_[1];Y(c,s,h,[v[0],v[1]])}P().then((function(e){var c=JSON.parse(e.data.files["Leaderboard.json"].content),s=[].concat(Object(O.a)(c),[{name:l,score:r}]).sort((function(e,t){return t.score-e.score})).slice(0,10),o={"Leaderboard.json":{content:JSON.stringify(s)}};i<r&&(u(r),o["Highscore.txt"]={content:r.toString()}),B({files:o}).then((function(e){return console.log(e.data)})),j(!1),d(t),b(r),n(0),a(Z())}))}(re)},ce=function(){!function(e){var t=e.setItems,a=e.setScore,r=e.previousItems;a(e.previousScore),t(r)}(re)},se=Object(r.useRef)();return Object(r.useEffect)((function(){se.current.focus()})),Object(j.jsx)("div",{ref:se,onKeyDown:function(e){switch(e.keyCode){case w:K("left",re);break;case I:K("up",re);break;case N:K("right",re);break;case k:K("down",re)}},tabIndex:-1,className:"body",children:Object(j.jsxs)(le,{children:[Object(j.jsx)(i.a,{}),Object(j.jsx)(f,{gameOver:A,setGameOver:L,resetBoardFunc:ne,undoFunc:ce}),Object(j.jsxs)(u.a,{container:!0,className:"side-padding",children:[Object(j.jsxs)(u.a,{container:!0,item:!0,xs:8,children:[Object(j.jsx)(oe,{score:d,highScore:g,resetBoardFunc:ne,undoFunc:ce}),Object(j.jsx)(Q,{items:a,deadItems:_,setDeadItems:h,setGameOver:L})]}),Object(j.jsx)(u.a,{item:!0,xs:4,children:Object(j.jsx)(ve,{leaderboard:$,username:ae})})]})]})})},pe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,168)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),r(e),n(e),c(e),s(e)}))};s.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(xe,{})}),document.getElementById("root")),pe()},28:function(e,t,a){e.exports={item:"Sidebar_item__3zPF1",container:"Sidebar_container__3CgDZ",header:"Sidebar_header__ozhuF",no_padding:"Sidebar_no_padding__ae2sm",little_padding:"Sidebar_little_padding__3-euM",header_container:"Sidebar_header_container__13qMT",max_width:"Sidebar_max_width__303kD",colour_white:"Sidebar_colour_white__3F1E8"}},54:function(e,t,a){e.exports={tileColour:"var(--quaternary-main)",box:"GridItem_box__2-38H",text:"GridItem_text__2lY2m"}},58:function(e,t,a){e.exports={header:"GameOver_header__b2OR4",on_top:"GameOver_on_top__1-FZG"}},61:function(e,t,a){e.exports={box:"Grid2048_box__21wtm",container:"Grid2048_container__3a0rY"}},94:function(e,t,a){},95:function(e,t,a){}},[[121,1,2]]]);
//# sourceMappingURL=main.cea7b6f9.chunk.js.map