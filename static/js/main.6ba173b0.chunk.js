(this["webpackJsonp2048-react"]=this["webpackJsonp2048-react"]||[]).push([[0],{68:function(e,t,n){},69:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(12),s=n.n(a),i=(n(68),n(6)),o=n(115),u=n(114),d=(n(69),n(25)),l=n(29),j=n(19),b=n(39),f=n(109),h=n(116),O=n(50),m=n.n(O),v=n(2),x=Object(f.a)({box:{display:"flex",position:"absolute",justifyContent:"center",alignItems:"center",width:"23%",height:"23%",margin:"1%",borderRadius:"10%",transition:"all 100ms linear"}}),g=function(e){return e.toString().concat("%")},p=function(e){var t=x(),n=e.items,r=e.id,a=e.type,s=e.deadItems,o=e.setDeadItems,u=Object(c.useState)(null),d=Object(i.a)(u,2),l=d[0],b=d[1];Object(c.useEffect)((function(){var e;switch(a){case"dead":b("red"),setTimeout((function(){var e=Object(j.a)({},s);delete e[r],o(e)}),100);break;case"blank":b("darkgrey");break;default:b("blue"),e=setTimeout((function(){b("white")}),100)}return function(){clearTimeout(e)}}),[a,s,r,b,o]);var f=Object(i.a)(n[r],3),O=f[0],p=f[1],y=f[2],S=g(25*O),I=g(25*p);return Object(v.jsx)(h.a,{bgcolor:l,className:m()(t.box,t.fadeIn),style:{top:I,left:S},children:"blank"===a?null:Object(v.jsxs)("h1",{style:{fontSize:"7vw"},children:[" ",y," "]})})},y=function(e){return Math.floor(Math.random()*e)},S=function(){return y(1e6)},I=function e(t,n){return t===n||t instanceof Array&&n instanceof Array&&t.length===n.length&&t.every((function(t,c){return e(t,n[c])}))},w=function(e){return Object(l.a)(Array(e).keys())},k=37,C=38,D=39,F=40,B=function(e){return JSON.parse(JSON.stringify(e))},T=n(55),z=n(110),N=Object(T.a)({palette:{primary:{main:"#fff3e0",contrastText:"#6d4c41"},secondary:{main:"#9e9e9e",contrastText:"#000"},background:{default:"#fff3e0"}}});function P(e){return Object(v.jsx)(z.a,{theme:N,children:e.children})}var A=n(40),H=n.n(A),L="6f5bb7add6a473c4a0a647c6e624b466",E={Authorization:"token ".concat("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")},G=Object(f.a)({box:{width:"100%",maxWidth:"80vh",paddingBottom:"min(100%, 80vh - 35px)",marginTop:"10px",marginBottom:"10px",position:"relative",border:"0.5vw solid ".concat(N.palette.secondary.main),background:N.palette.secondary.main,borderRadius:"3%"}}),M=function(){for(var e={},t=function(t){return e=t},n=0;n<2;n++)J(e,t);return e},R=function(e,t){var n,c=Object(b.a)(t);try{for(c.s();!(n=c.n()).done;){var r=n.value;if(e[0]===r[0]&&e[1]===r[1])return!0}}catch(a){c.e(a)}finally{c.f()}return!1},J=function(e,t){var n;do{n=[y(4),y(4)]}while(R(n,Object.values(e)));t(Object(j.a)(Object(j.a)({},e),{},Object(d.a)({},S(),[].concat(Object(l.a)(n),[Math.random()<.9?2:4]))))},W=function(e,t,n,c){t(Object(j.a)(Object(j.a)({},e),{},Object(d.a)({},n,c)))},K=function(e){for(var t,n=e.items,c=e.setItems,r=e.score,a=e.setScore,s=e.deadItems,o=e.setDeadItems,u=e.highScore,d=e.setHighScore,l=e.setPreviousItems,j=e.setPreviousScore,b=0,f=Object.entries(n);b<f.length;b++){var h=Object(i.a)(f[b],2),O=h[0],m=h[1];W(s,o,O,[m[0],m[1]])}u<r&&(d(r),(t={files:{"Highscore.txt":{content:r.toString()}}},H.a.patch("https://api.github.com/gists/".concat(L),t,{headers:E})).then((function(e){console.log(e.data)}))),l(n),j(r),a(0),c(M())},_=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[[],[],[],[]],c=0,r=Object.entries(B(e));c<r.length;c++){var a=Object(i.a)(r[c],2),s=a[0],o=a[1];n[o[t?0:1]].push([s,o])}for(var u=0;u<4;u++)n[u].sort((function(e,n){return e[1][t?1:0]-n[1][t?1:0]}));return n},q=function(e,t){for(var n=t.items,c=t.setItems,r=t.score,a=t.setScore,s=t.deadItems,o=t.setDeadItems,u=t.setPreviousItems,d=t.setPreviousScore,j=["left","right"].includes(e)?0:1,b=r,f=_(n,1===j),h={},O=0;O<f.length;O++){var m=f[O];m.sort((function(e,t){return e[1][j]-t[1][j]}));for(var v=1;v<m.length;v++)m[v][1][2]===m[v-1][1][2]&&(m[v][1][2]=2*m[v][1][2],b+=m[v][1][2],W.apply(void 0,[s,o].concat(Object(l.a)(m[v-1]))),m.splice(v-1,1));["right","down"].includes(e)&&m.reverse();for(var x=0;x<m.length;x++){var g=Object(i.a)(m[x],2),p=g[0],y=g[1],S=["right","down"].includes(e)?3-x:x;h[p]=[],h[p][1-j]=O,h[p][j]=S,h[p][2]=y[2]}}I(Object.values(h),Object.values(n))||(u(n),d(r),a(b),setTimeout((function(){J(h,c)}),1))},Q=function(e){var t=G(),n=e.items,r=e.deadItems,a=e.setDeadItems,s=e.setGameOver,o=Object(c.useState)(function(){for(var e={},t=0;t<16;t++)e[S()]=[t%4,Math.floor(t/4),0];return e}()),u=Object(i.a)(o,1)[0];return Object(c.useEffect)((function(){(function(e){var t,n=_(e,!0),c=Object(b.a)(n);try{for(c.s();!(t=c.n()).done;)if(t.value.length<4)return!1}catch(v){c.e(v)}finally{c.f()}for(var r=0,a=Object.values(e);r<a.length;r++)for(var s=a[r],o=Object(i.a)(s,3),u=o[0],d=o[1],l=o[2],j=0,f=[[u-1,d],[u+1,d],[u,d-1],[u,d+1]];j<f.length;j++){var h=Object(i.a)(f[j],2),O=h[0],m=h[1];if(w(4).includes(O)&&w(4).includes(m)&&n[O][m][1][2]===l)return!1}return!0})(n)&&setTimeout((function(){s(!0)}),400)}),[n,s]),Object(v.jsx)("div",{style:{width:"100%"},children:Object(v.jsxs)("div",{className:t.box,onAnimationEnd:J,children:[Object.keys(u).map((function(e){return Object(v.jsx)(p,{items:u,type:"blank",id:e},e)})),Object.keys(r).map((function(e){return Object(v.jsx)(p,{items:r,id:e,type:"dead",deadItems:r,setDeadItems:a},e)})),Object.keys(n).map((function(e){return Object(v.jsx)(p,{items:n,id:e},e)}))]})})},U=n(111),V=n(117),X=n(112),Y=n(113),Z=Object(f.a)({container:{display:"flex",flexDirection:"column",width:"100%"},header:{display:"flex",width:"100%",justifyContent:"flex-end",margin:"10px"},actionBar:{display:"flex",width:"100%",justifyContent:"flex-end"},box:{marginLeft:"10px",padding:"12px",background:"grey",borderRadius:"10px",color:"white",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}}),$=function(e){var t=Z(),n=e.title,c=e.score;return Object(v.jsxs)("div",{className:t.box,children:[Object(v.jsx)("h3",{style:{fontSize:"1.5vw",margin:"0"},children:n}),c>-1?Object(v.jsx)("h2",{style:{fontSize:"2.5vw",margin:"0"},children:c}):Object(v.jsx)(U.a,{size:"2.5vw"})]})},ee=function(e){var t=e.score,n=e.resetBoardFunc,c=e.highScore,r=e.undoFunc,a=Z();return Object(v.jsxs)("div",{className:a.container,children:[Object(v.jsxs)("div",{className:a.header,children:[Object(v.jsx)("h1",{style:{margin:"0 auto 0 0",fontSize:"min(6vw, 60px)"},children:"2048-React"}),Object(v.jsx)($,{title:"Score",score:t}),Object(v.jsx)($,{title:"Highscore",score:c})]}),Object(v.jsxs)("div",{className:a.actionBar,children:[Object(v.jsx)(V.a,{variant:"contained",color:"secondary",onClick:r,children:Object(v.jsx)(X.a,{style:{color:"white"}})}),Object(v.jsx)(V.a,{variant:"contained",color:"secondary",onClick:n,style:{marginLeft:"10px"},children:Object(v.jsx)(Y.a,{style:{color:"white"}})})]})]})},te=n(118),ne=function(e){var t=e.gameOver,n=e.setGameOver,c=e.undoFunc,r=e.resetBoardFunc;return Object(v.jsx)(te.a,{open:t,style:{zIndex:1},children:Object(v.jsxs)(u.a,{children:[Object(v.jsx)(u.a,{children:Object(v.jsx)("h1",{style:{color:"white"},children:"Game Over!"})}),Object(v.jsxs)(u.a,{children:[Object(v.jsx)(V.a,{variant:"contained",color:"secondary",style:{margin:"10px"},onClick:function(){n(!1),c()},children:Object(v.jsx)(X.a,{style:{color:"white"}})}),Object(v.jsx)(V.a,{variant:"contained",color:"secondary",style:{margin:"10px"},onClick:function(){n(!1),r()},children:Object(v.jsx)(Y.a,{style:{color:"white"}})})]})]})})};var ce=function(){var e=Object(c.useState)(M()),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(0),s=Object(i.a)(a,2),d=s[0],l=s[1],j=Object(c.useState)({}),b=Object(i.a)(j,2),f=b[0],h=b[1],O=Object(c.useState)(-1),m=Object(i.a)(O,2),x=m[0],g=m[1],p=Object(c.useState)(n),y=Object(i.a)(p,2),S=y[0],I=y[1],w=Object(c.useState)(d),B=Object(i.a)(w,2),T=B[0],z=B[1],N=Object(c.useState)(!1),A=Object(i.a)(N,2),E=A[0],G=A[1];Object(c.useEffect)((function(){var e=function(){H.a.get("https://api.github.com/gists/".concat(L)).then((function(e){var t=parseInt(e.data.files["Highscore.txt"].content);t>x&&g(t)}))};e(),setInterval((function(){e()}),5e3)}),[x,g]),console.log(window.navigator.userAgent);var R={items:n,setItems:r,score:d,setScore:l,deadItems:f,setDeadItems:h,highScore:x,setHighScore:g,previousItems:S,setPreviousItems:I,previousScore:T,setPreviousScore:z},J=function(){K(R)},W=function(){!function(e){var t=e.setItems,n=e.setScore,c=e.previousItems;n(e.previousScore),t(c)}(R)},_=Object(c.useRef)();return Object(c.useEffect)((function(){_.current.focus()})),Object(v.jsx)("div",{ref:_,onKeyDown:function(e){switch(e.keyCode){case k:q("left",R);break;case C:q("up",R);break;case D:q("right",R);break;case F:q("down",R)}},tabIndex:-1,style:{height:"100vh"},children:Object(v.jsxs)(P,{children:[Object(v.jsx)(o.a,{}),Object(v.jsx)(ne,{gameOver:E,setGameOver:G,resetBoardFunc:J,undoFunc:W}),Object(v.jsxs)(u.a,{container:!0,children:[Object(v.jsx)(u.a,{item:!0,xs:2}),Object(v.jsxs)(u.a,{container:!0,item:!0,xs:8,children:[Object(v.jsx)(ee,{score:d,highScore:x,resetBoardFunc:J,undoFunc:W}),Object(v.jsx)(Q,{items:n,deadItems:f,setDeadItems:h,setGameOver:G})]}),Object(v.jsx)(u.a,{item:!0,xs:2})]})]})})},re=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,120)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};s.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(ce,{})}),document.getElementById("root")),re()}},[[93,1,2]]]);
//# sourceMappingURL=main.6ba173b0.chunk.js.map