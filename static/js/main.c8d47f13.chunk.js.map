{"version":3,"sources":["components/GridItem.jsx","helpers/common.js","components/Palette.jsx","components/Grid2048.jsx","components/Header.jsx","App.js","reportWebVitals.js","index.js"],"names":["useStyles","makeStyles","box","display","position","justifyContent","alignItems","width","height","margin","borderRadius","transition","toPercentage","num","toString","concat","GridItem","props","classes","items","id","type","deadItems","setDeadItems","useState","bgcolor","setBgColor","useEffect","colTimeOut","setTimeout","temp","clearTimeout","x","y","val","left","top","Box","className","classNames","fadeIn","style","fontSize","randomInt","max","Math","floor","random","randomId","equals","a","b","Array","length","every","v","i","KEY_BINDINGS","theme","createMuiTheme","palette","primary","main","contrastText","secondary","background","default","Palette","ThemeProvider","children","maxWidth","paddingBottom","marginTop","marginBottom","border","createInitialItems","initialItems","setInitialItems","someItems","addRandomItem","isSpaceTaken","coords","item","setItems","Object","values","addDeadItem","itemId","itemPos","shift","direction","states","object","score","setScore","setPreviousItems","setPreviousScore","lines","coordIndex","includes","newScore","entries","JSON","parse","stringify","push","newItems","line","sort","k","splice","reverse","j","key","item2","newJ","Grid2048","blankItems","createInitialBlankItems","onAnimationEnd","keys","map","container","flexDirection","header","actionBar","marginLeft","padding","color","ScoreBox","title","Header","resetBoardFunc","highScore","undoFunc","Button","variant","onClick","Undo","Refresh","App","setHighScore","previousItems","previousScore","inputRef","useRef","current","focus","ref","onKeyDown","event","keyCode","tabIndex","CssBaseline","Grid","xs","resetBoard","undo","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c8d47f13.chunk.js","sourcesContent":["import { Box, makeStyles } from \"@material-ui/core\";\nimport React, { useEffect, useState } from \"react\";\nimport classNames from \"classnames\";\n\nconst useStyles = makeStyles({\n  box: {\n    display: \"flex\",\n    position: \"absolute\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    width: \"23%\",\n    height: \"23%\",\n    margin: \"1%\",\n    borderRadius: \"10%\",\n    transition: \"all 100ms linear\",\n  },\n});\n\nconst toPercentage = (num) => num.toString().concat(\"%\");\n\nconst GridItem = (props) => {\n  const classes = useStyles();\n  const { items, id, type, deadItems, setDeadItems } = props;\n  const [bgcolor, setBgColor] = useState(null);\n\n  useEffect(() => {\n    let colTimeOut;\n    switch (type) {\n      case \"dead\":\n        setBgColor(\"red\");\n        setTimeout(() => {\n          const temp = { ...deadItems };\n          delete temp[id];\n          setDeadItems(temp);\n        }, 100);\n        break;\n      case \"blank\":\n        setBgColor(\"darkgrey\");\n        break;\n      default:\n        setBgColor(\"blue\");\n        colTimeOut = setTimeout(() => {\n          setBgColor(\"white\");\n        }, 100);\n        break;\n    }\n    return () => {\n      clearTimeout(colTimeOut);\n    };\n  }, [type, deadItems, id, setBgColor, setDeadItems]);\n\n  var [x, y, val] = items[id];\n\n  var left = toPercentage(x * 25);\n  var top = toPercentage(y * 25);\n\n  return (\n    <Box\n      bgcolor={bgcolor}\n      className={classNames(classes.box, classes.fadeIn)}\n      style={{ top, left }}\n    >\n      {type === \"blank\" ? null : <h1 style={{ fontSize: \"7vw\" }}> {val} </h1>}\n    </Box>\n  );\n};\n\nexport default GridItem;\n","export const randomInt = (max) => Math.floor(Math.random() * max);\n\nexport const getRandomCoords = () => [randomInt(4), randomInt(4)];\n\nexport const randomId = () => randomInt(1000000);\n\nexport const getRandomNum = () => {\n  const x = Math.random();\n  if (x < 0.9) {\n    return 2;\n  } else {\n    return 4;\n  }\n};\n\nexport const equals = (a, b) => {\n  if (a === b) {\n    return true;\n  } else if (\n    a instanceof Array &&\n    b instanceof Array &&\n    a.length === b.length\n  ) {\n    return a.every((v, i) => equals(v, b[i]));\n  } else {\n    return false;\n  }\n};\n\nexport const range = (n) => [...Array(n).keys()];\n\nexport const KEY_BINDINGS = {\n  KEY_LEFT: 37,\n  KEY_UP: 38,\n  KEY_RIGHT: 39,\n  KEY_DOWN: 40,\n};\n\nexport const deepCopy = (object) => JSON.parse(JSON.stringify(object));\n","import React from \"react\";\nimport { createMuiTheme } from \"@material-ui/core/styles\";\nimport { ThemeProvider } from \"@material-ui/styles\";\n\nexport const theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: \"#fff3e0\",\n      contrastText: \"#6d4c41\",\n    },\n    secondary: {\n      main: \"#9e9e9e\",\n      contrastText: \"#000\",\n    },\n    background: {\n      default: \"#fff3e0\",\n    },\n  },\n});\n\nexport default function Palette(props) {\n  return <ThemeProvider theme={theme}>{props.children}</ThemeProvider>;\n}\n","import { makeStyles } from \"@material-ui/core\";\nimport React, { useState } from \"react\";\nimport GridItem from \"./GridItem\";\nimport {\n  getRandomCoords,\n  randomId,\n  getRandomNum,\n  equals,\n} from \"../helpers/common\";\nimport { theme } from \"./Palette\";\nimport { deepCopy } from \"../helpers/common\";\n\nconst useStyles = makeStyles({\n  box: {\n    width: \"100%\",\n    maxWidth: \"80vh\",\n    paddingBottom: \"min(100%, 80vh - 35px)\",\n    marginTop: \"10px\",\n    marginBottom: \"10px\",\n    position: \"relative\",\n    border: \"0.5vw solid \".concat(theme.palette.secondary.main),\n    background: theme.palette.secondary.main,\n    borderRadius: \"3%\",\n  },\n});\n\nexport const createInitialItems = () => {\n  var initialItems = {};\n  const setInitialItems = (someItems) => (initialItems = someItems);\n\n  for (var i = 0; i < 2; i++) {\n    addRandomItem(initialItems, setInitialItems);\n  }\n\n  return initialItems;\n};\n\nconst isSpaceTaken = (coords, items) => {\n  for (var item of items) {\n    if (coords[0] === item[0] && coords[1] === item[1]) {\n      return true;\n    }\n  }\n  return false;\n};\n\nconst addRandomItem = (items, setItems) => {\n  let coords;\n  do {\n    coords = getRandomCoords();\n  } while (isSpaceTaken(coords, Object.values(items)));\n\n  setItems({ ...items, [randomId()]: [...coords, getRandomNum()] });\n};\n\nconst addDeadItem = (deadItems, setDeadItems, itemId, itemPos) => {\n  setDeadItems({ ...deadItems, [itemId]: itemPos });\n};\n\nexport const resetBoard = (states) => {\n  const {\n    items,\n    setItems,\n    score,\n    setScore,\n    deadItems,\n    setDeadItems,\n    highScore,\n    setHighScore,\n    setPreviousItems,\n    setPreviousScore,\n  } = states;\n  for (var [id, item] of Object.entries(items)) {\n    addDeadItem(deadItems, setDeadItems, id, [item[0], item[1]]);\n  }\n  if (highScore < score) {\n    setHighScore(score);\n  }\n\n  // Set previous state\n  setPreviousItems(items);\n  setPreviousScore(score);\n\n  setScore(0);\n  setItems(createInitialItems());\n};\n\nexport const undo = (states) => {\n  const { setItems, setScore, previousItems, previousScore } = states;\n  setScore(previousScore);\n  setItems(previousItems);\n};\n\nexport const shift = (direction, states) => {\n  const {\n    items,\n    setItems,\n    score,\n    setScore,\n    deadItems,\n    setDeadItems,\n    setPreviousItems,\n    setPreviousScore,\n  } = states;\n\n  const lines = [[], [], [], []];\n  const coordIndex = [\"left\", \"right\"].includes(direction) ? 0 : 1;\n  let newScore = score;\n\n  // Create grid of items\n  for (var [id, item] of Object.entries(deepCopy(items))) {\n    lines[item[1 - coordIndex]].push([id, item]);\n  }\n\n  const newItems = {};\n  for (var i = 0; i < lines.length; i++) {\n    const line = lines[i];\n\n    // Sort line into helpful order\n    line.sort((a, b) => a[1][coordIndex] - b[1][coordIndex]);\n\n    // Combine items in line if possible\n    for (var k = 1; k < line.length; k++) {\n      // If adjacent tile (in direction of shift) has the same value\n      if (line[k][1][2] === line[k - 1][1][2]) {\n        // Remove item\n        line[k][1][2] = line[k][1][2] * 2;\n        newScore += line[k][1][2];\n        addDeadItem(deadItems, setDeadItems, ...line[k - 1]);\n        line.splice(k - 1, 1);\n      }\n    }\n\n    // Sort line into correct order (if not already)\n    if ([\"right\", \"down\"].includes(direction)) {\n      line.reverse();\n    }\n\n    // Translate grid indexes to coordinates\n    for (var j = 0; j < line.length; j++) {\n      const [key, item2] = line[j];\n\n      const newJ = [\"right\", \"down\"].includes(direction) ? 3 - j : j;\n\n      newItems[key] = [];\n      newItems[key][1 - coordIndex] = i;\n      newItems[key][coordIndex] = newJ;\n      newItems[key][2] = item2[2];\n    }\n  }\n\n  // Add item to the grid\n  if (!equals(Object.values(newItems), Object.values(items))) {\n    // Set previous state\n    setPreviousItems(items);\n    setPreviousScore(score);\n\n    setScore(newScore);\n\n    setTimeout(() => {\n      addRandomItem(newItems, setItems);\n    }, 1);\n  }\n};\n\nconst createInitialBlankItems = () => {\n  const blankItems = {};\n  for (var i = 0; i < 16; i++) {\n    blankItems[randomId()] = [i % 4, Math.floor(i / 4), 0];\n  }\n  return blankItems;\n};\n\nconst Grid2048 = (props) => {\n  const classes = useStyles();\n  const { items, deadItems, setDeadItems } = props;\n  const [blankItems] = useState(createInitialBlankItems());\n\n  return (\n    <div style={{ width: \"100%\" }}>\n      <div className={classes.box} onAnimationEnd={addRandomItem}>\n        {Object.keys(blankItems).map((id) => (\n          <GridItem items={blankItems} type=\"blank\" key={id} id={id} />\n        ))}\n        {Object.keys(deadItems).map((id) => (\n          <GridItem\n            items={deadItems}\n            key={id}\n            id={id}\n            type=\"dead\"\n            deadItems={deadItems}\n            setDeadItems={setDeadItems}\n          />\n        ))}\n        {Object.keys(items).map((id) => (\n          <GridItem items={items} key={id} id={id} />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default Grid2048;\n","import { makeStyles, Button } from \"@material-ui/core\";\nimport React from \"react\";\nimport { Refresh, Undo } from \"@material-ui/icons\";\n\nconst useStyles = makeStyles({\n  container: { display: \"flex\", flexDirection: \"column\", width: \"100%\" },\n  header: {\n    display: \"flex\",\n    width: \"100%\",\n    justifyContent: \"flex-end\",\n    margin: \"10px\",\n  },\n  actionBar: {\n    display: \"flex\",\n    width: \"100%\",\n    justifyContent: \"flex-end\",\n  },\n  box: {\n    marginLeft: \"10px\",\n    padding: \"12px\",\n    background: \"grey\",\n    borderRadius: \"10px\",\n    color: \"white\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    flexDirection: \"column\",\n  },\n});\n\nconst ScoreBox = (props) => {\n  const classes = useStyles();\n  const { title, score } = props;\n  return (\n    <div className={classes.box}>\n      <h3 style={{ fontSize: \"1.5vw\", margin: \"0\" }}>{title}</h3>\n      <h2 style={{ fontSize: \"2.5vw\", margin: \"0\" }}>{score}</h2>\n    </div>\n  );\n};\n\nconst Header = (props) => {\n  const { score, resetBoardFunc, highScore, undoFunc } = props;\n  const classes = useStyles();\n  return (\n    <div className={classes.container}>\n      <div className={classes.header}>\n        <h1 style={{ margin: \"0 auto 0 0\", fontSize: \"min(6vw, 60px)\" }}>\n          2048-React\n        </h1>\n        <ScoreBox title=\"Score\" score={score} />\n        <ScoreBox title=\"Highscore\" score={highScore} />\n      </div>\n      <div className={classes.actionBar}>\n        <Button variant=\"contained\" color=\"secondary\" onClick={undoFunc}>\n          <Undo style={{ color: \"white\" }} />\n        </Button>\n        <Button\n          variant=\"contained\"\n          color=\"secondary\"\n          onClick={resetBoardFunc}\n          style={{ marginLeft: \"10px\" }}\n        >\n          <Refresh style={{ color: \"white\" }} />\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default Header;\n","import { CssBaseline, Grid } from \"@material-ui/core\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport \"./App.css\";\nimport Grid2048, {\n  createInitialItems,\n  shift,\n  resetBoard,\n  undo,\n} from \"./components/Grid2048\";\nimport Palette from \"./components/Palette\";\nimport Header from \"./components/Header\";\nimport { KEY_BINDINGS } from \"./helpers/common\";\n\nfunction App() {\n  const [items, setItems] = useState(createInitialItems());\n  const [score, setScore] = useState(0);\n  const [deadItems, setDeadItems] = useState({});\n  const [highScore, setHighScore] = useState(0);\n  const [previousItems, setPreviousItems] = useState(items);\n  const [previousScore, setPreviousScore] = useState(score);\n\n  const states = {\n    items,\n    setItems,\n    score,\n    setScore,\n    deadItems,\n    setDeadItems,\n    highScore,\n    setHighScore,\n    previousItems,\n    setPreviousItems,\n    previousScore,\n    setPreviousScore,\n  };\n\n  const resetBoardFunc = () => {\n    resetBoard(states);\n  };\n\n  const undoFunc = () => {\n    undo(states);\n  };\n\n  const inputRef = useRef();\n\n  useEffect(() => {\n    inputRef.current.focus();\n  });\n\n  const handleKeyDown = (event) => {\n    switch (event.keyCode) {\n      case KEY_BINDINGS.KEY_LEFT:\n        shift(\"left\", states);\n        break;\n      case KEY_BINDINGS.KEY_UP:\n        shift(\"up\", states);\n        break;\n      case KEY_BINDINGS.KEY_RIGHT:\n        shift(\"right\", states);\n        break;\n      case KEY_BINDINGS.KEY_DOWN:\n        shift(\"down\", states);\n        break;\n      default:\n        break;\n    }\n  };\n\n  return (\n    <div\n      ref={inputRef}\n      onKeyDown={handleKeyDown}\n      tabIndex={-1}\n      style={{ height: \"100vh\" }}\n    >\n      <Palette>\n        <CssBaseline />\n        <Grid container>\n          <Grid item xs={2}></Grid>\n          <Grid container item xs={8}>\n            <Header\n              score={score}\n              highScore={highScore}\n              resetBoardFunc={resetBoardFunc}\n              undoFunc={undoFunc}\n            />\n            <Grid2048\n              items={items}\n              deadItems={deadItems}\n              setDeadItems={setDeadItems}\n            />\n          </Grid>\n          <Grid item xs={2}></Grid>\n        </Grid>\n      </Palette>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}