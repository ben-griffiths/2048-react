(this["webpackJsonp2048-react"]=this["webpackJsonp2048-react"]||[]).push([[0],{12:function(e,t,a){e.exports={container:"Header_container__1VC87",header:"Header_header__1VCKf",actionBar:"Header_actionBar__1RiDW",box:"Header_box__1-jsk",main_header:"Header_main_header__23YrG",refresh_button:"Header_refresh_button__j_4vX",colour_white:"Header_colour_white__2cjo3",zero_margin:"Header_zero_margin__14M5g",font_size_2_5vw:"Header_font_size_2_5vw__2_IJb",font_size_1_5vw:"Header_font_size_1_5vw__H3TpT"}},121:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(10),s=a.n(c),o=(a(94),a(11)),i=a(159),u=a(160),d=(a(95),a(164)),b=a(58),l=a.n(b),j=a(4),f=function(e){var t=e.gameOver;return Object(j.jsx)(d.a,{open:t,className:l.a.on_top,children:Object(j.jsx)("h1",{className:l.a.header,children:"Game Over!"})})},m=a(15),O=a(163),_=a(53),h=a.n(_),v=function(e){return e.toString().concat("%")},x=function(e){var t=e.items,a=e.id,n=e.type,c=e.deadItems,s=e.setDeadItems,i=Object(r.useState)(null),u=Object(o.a)(i,2),d=u[0],b=u[1];Object(r.useEffect)((function(){var e;switch(n){case"dead":b("red"),setTimeout((function(){var e=Object(m.a)({},c);delete e[a],s(e)}),100);break;case"blank":b(_.tileColour);break;default:b("blue"),e=setTimeout((function(){b("white")}),100)}return function(){clearTimeout(e)}}),[n,c,a,b,s]);var l=Object(o.a)(t[a],3),f=l[0],x=l[1],p=l[2],g=v(25*f),S=v(25*x);return Object(j.jsx)(O.a,{bgcolor:d,className:h.a.box,style:{top:S,left:g},children:"blank"===n?null:Object(j.jsxs)("h1",{className:h.a.text,children:[" ",p," "]})})},p=a(59),g=a.n(p),S=a(17),y=a(42),w=a.n(y),I=a(60),N=a(54),k=a.n(N),H=a(29),z=function(e){return Math.floor(Math.random()*e)},F=function(){return z(1e6)},D=function e(t,a){return t===a||t instanceof Array&&a instanceof Array&&t.length===a.length&&t.every((function(t,r){return e(t,a[r])}))},T=function(e){return Object(S.a)(Array(e).keys())},G=function(e){return e[z(e.length)]},C=37,P=38,B=39,E=40,J=function(e){return JSON.parse(JSON.stringify(e))};k.a.defaults.headers={Authorization:"token ".concat(atob("Z2hwX1dDdXptZDZyWm1IWldSdFpESWkzMVNVa2IwOTFBcjJCYW4wTA=="))};var M="6f5bb7add6a473c4a0a647c6e624b466",A=function(){var e=Object(I.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k.a.get("https://api.github.com/gists/".concat(M,"?").concat(F())));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(I.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k.a.patch("https://api.github.com/gists/".concat(M),t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=a(41),W=a(61),Z=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=[[],[],[],[]],r=0,n=Object.entries(J(e));r<n.length;r++){var c=Object(o.a)(n[r],2),s=c[0],i=c[1];a[i[t?0:1]].push([s,i])}for(var u=0;u<4;u++)a[u].sort((function(e,a){return e[1][t?1:0]-a[1][t?1:0]}));return a},q=function(e,t){var a,r=Object(W.a)(t);try{for(r.s();!(a=r.n()).done;){var n=a.value;if(e[0]===n[0]&&e[1]===n[1])return!0}}catch(c){r.e(c)}finally{r.f()}return!1},R=function(){for(var e={},t=function(t){return e=t},a=0;a<2;a++)Y(e,t);return e},Y=function(e,t){var a;do{a=[z(4),z(4)]}while(q(a,Object.values(e)));t(Object(m.a)(Object(m.a)({},e),{},Object(V.a)({},F(),[].concat(Object(S.a)(a),[Math.random()<.9?2:4]))))},X=function(e,t,a,r){t(Object(m.a)(Object(m.a)({},e),{},Object(V.a)({},a,r)))},K=function(e,t){for(var a=t.items,r=t.setItems,n=t.score,c=t.setScore,s=t.deadItems,i=t.setDeadItems,u=t.setPreviousItems,d=t.setPreviousScore,b=["left","right"].includes(e)?0:1,l=n,j=Z(a,1===b),f={},m=0;m<j.length;m++){var O=j[m];O.sort((function(e,t){return e[1][b]-t[1][b]}));for(var _=1;_<O.length;_++)O[_][1][2]===O[_-1][1][2]&&(O[_][1][2]=2*O[_][1][2],l+=O[_][1][2],X.apply(void 0,[s,i].concat(Object(S.a)(O[_-1]))),O.splice(_-1,1));["right","down"].includes(e)&&O.reverse();for(var h=0;h<O.length;h++){var v=Object(o.a)(O[h],2),x=v[0],p=v[1],g=["right","down"].includes(e)?3-h:h;f[x]=[],f[x][1-b]=m,f[x][b]=g,f[x][2]=p[2]}}D(Object.values(f),Object.values(a))||(u(a),d(n),c(l),setTimeout((function(){Y(f,r)}),1))},Q=function(){for(var e={},t=0;t<16;t++)e[F()]=[t%4,Math.floor(t/4),0];return e},U=function(e){var t,a=Z(e,!0),r=Object(W.a)(a);try{for(r.s();!(t=r.n()).done;){if(t.value.length<4)return!1}}catch(_){r.e(_)}finally{r.f()}for(var n=0,c=Object.values(e);n<c.length;n++)for(var s=c[n],i=Object(o.a)(s,3),u=i[0],d=i[1],b=i[2],l=0,j=[[u-1,d],[u+1,d],[u,d-1],[u,d+1]];l<j.length;l++){var f=Object(o.a)(j[l],2),m=f[0],O=f[1];if(T(4).includes(m)&&T(4).includes(O))if(a[m][O][1][2]===b)return!1}return!0},$=function(e){var t=e.items,a=e.deadItems,n=e.setDeadItems,c=e.setGameOver,s=Object(r.useState)(Q()),i=Object(o.a)(s,1)[0];return Object(r.useEffect)((function(){U(t)&&setTimeout((function(){c(!0)}),400)}),[t,c]),Object(j.jsx)("div",{className:g.a.container,children:Object(j.jsxs)("div",{className:g.a.box,onAnimationEnd:Y,children:[Object.keys(i).map((function(e){return Object(j.jsx)(x,{items:i,type:"blank",id:e},e)})),Object.keys(a).map((function(e){return Object(j.jsx)(x,{items:a,id:e,type:"dead",deadItems:a,setDeadItems:n},e)})),Object.keys(t).map((function(e){return Object(j.jsx)(x,{items:t,id:e},e)}))]})})},ee=a(152),te=a(153),ae=a(154),re=a(155),ne=a(62),ce=a.n(ne),se=a(12),oe=a.n(se),ie=function(e){var t=e.title,a=e.score;return Object(j.jsxs)("div",{className:oe.a.box,children:[Object(j.jsx)("h3",{className:ce()(oe.a.font_size_1_5vw,oe.a.zero_margin),children:t}),a>-1?Object(j.jsx)("h2",{className:ce()(oe.a.font_size_2_5vw,oe.a.zero_margin),children:a}):Object(j.jsx)(ee.a,{className:oe.a.font_size_2_5vw})]})},ue=function(e){var t=e.score,a=e.resetBoardFunc,r=e.highScore,n=e.undoFunc;return Object(j.jsxs)("div",{className:oe.a.container,children:[Object(j.jsxs)("div",{className:oe.a.header,children:[Object(j.jsx)("h1",{className:oe.a.main_header,children:"2048-React"}),Object(j.jsx)(ie,{title:"Score",score:t}),Object(j.jsx)(ie,{title:"Highscore",score:r})]}),Object(j.jsxs)("div",{className:oe.a.actionBar,children:[Object(j.jsx)(te.a,{variant:"contained",color:"secondary",onClick:n,children:Object(j.jsx)(ae.a,{className:oe.a.colour_white})}),Object(j.jsx)(te.a,{variant:"contained",color:"secondary",onClick:a,className:oe.a.refresh_button,children:Object(j.jsx)(re.a,{className:oe.a.colour_white})})]})]})},de=a(79),be=a(156),le=function(e){var t=getComputedStyle(document.documentElement).getPropertyValue(e).trim();return t||"#fff"},je=Object(de.a)({palette:{primary:{main:le("--primary-main"),contrastText:le("--primary-contrast")},secondary:{main:le("--secondary-main"),contrastText:le("--secondary-contrast")},tertiary:{main:le("--tertiary-main"),contrastText:le("--tertiary-contrast")},quaternary:{main:le("--quaternary-main")},background:{default:le("--background-default")}}});var fe=function(e){return Object(j.jsx)(be.a,{theme:je,children:e.children})},me=a(161),Oe=a(157),_e=a(158),he=a(165),ve=a(28),xe=a.n(ve),pe=function(e){var t=e.leaderboard,a=e.username;return Object(j.jsxs)("div",{className:xe.a.little_padding,children:[Object(j.jsx)("div",{className:xe.a.header_container,children:Object(j.jsx)(me.a,{id:"standard-basic",label:"Name",InputProps:{className:xe.a.colour_white},defaultValue:a})}),Object(j.jsxs)("div",{className:xe.a.container,children:[Object(j.jsx)("h1",{className:xe.a.header,children:"LeaderBoard"}),Object(j.jsx)(Oe.a,{className:xe.a.no_padding,children:t?T(t.length).map((function(e){return Object(j.jsxs)(_e.a,{className:xe.a.item,children:[Object(j.jsx)(he.a,{primary:"".concat(e+1,".")}),Object(j.jsx)(he.a,{primary:t[e].name,secondary:t[e].score})]})})):Object(j.jsx)(ee.a,{size:"2.5vw"})})]})]})};var ge=function(){var e=Object(r.useState)(R()),t=Object(o.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(0),s=Object(o.a)(c,2),d=s[0],b=s[1],l=Object(r.useState)({}),m=Object(o.a)(l,2),O=m[0],_=m[1],h=Object(r.useState)(-1),v=Object(o.a)(h,2),x=v[0],p=v[1],g=Object(r.useState)(a),y=Object(o.a)(g,2),w=y[0],I=y[1],N=Object(r.useState)(d),k=Object(o.a)(N,2),z=k[0],F=k[1],D=Object(r.useState)(!1),T=Object(o.a)(D,2),J=T[0],M=T[1],V=Object(r.useState)(null),W=Object(o.a)(V,2),Z=W[0],q=W[1],Y=Object(r.useState)(null),Q=Object(o.a)(Y,2),U=Q[0],ee=Q[1],te=Object(r.useState)(function(){var e=[H.c,H.f,H.e],t=[[],[H.b],[H.d]],a=H.a.generate({min:100,max:999}),r=[].concat(Object(S.a)(G(t)),[G(e),a]);return Object(H.g)({dictionaries:r,separator:"",style:"capital"}).replace(/ /g,"")}()),ae=Object(o.a)(te,1)[0];Object(r.useEffect)((function(){A().then((function(e){var t=parseInt(e.data.files["Highscore.txt"].content);t>x&&p(t);var a=JSON.parse(e.data.files["Leaderboard.json"].content);ee(a)}))}),[x,Z]),Object(r.useEffect)((function(){Z||setInterval((function(){q(new Date)}),5e3)}),[Z,q]);var re={items:a,setItems:n,score:d,setScore:b,deadItems:O,setDeadItems:_,highScore:x,setHighScore:p,previousItems:w,setPreviousItems:I,previousScore:z,setPreviousScore:F,leaderboard:U,username:ae,setGameOver:M},ne=function(){!function(e){for(var t=e.items,a=e.setItems,r=e.score,n=e.setScore,c=e.deadItems,s=e.setDeadItems,i=e.highScore,u=e.setHighScore,d=e.setPreviousItems,b=e.setPreviousScore,l=e.username,j=e.setGameOver,f=0,m=Object.entries(t);f<m.length;f++){var O=Object(o.a)(m[f],2),_=O[0],h=O[1];X(c,s,_,[h[0],h[1]])}A().then((function(e){var c=JSON.parse(e.data.files["Leaderboard.json"].content),s=[].concat(Object(S.a)(c),[{name:l,score:r}]).sort((function(e,t){return t.score-e.score})).slice(0,10),o={"Leaderboard.json":{content:JSON.stringify(s)}};i<r&&(u(r),o["Highscore.txt"]={content:r.toString()}),L({files:o}).then((function(e){return console.log(e.data)})),j(!1),d(t),b(r),n(0),a(R())}))}(re)},ce=function(){!function(e){var t=e.setItems,a=e.setScore,r=e.previousItems;a(e.previousScore),t(r)}(re)},se=Object(r.useRef)();return Object(r.useEffect)((function(){se.current.focus()})),Object(j.jsx)("div",{ref:se,onKeyDown:function(e){switch(e.keyCode){case C:K("left",re);break;case P:K("up",re);break;case B:K("right",re);break;case E:K("down",re)}},tabIndex:-1,className:"body",children:Object(j.jsxs)(fe,{children:[Object(j.jsx)(i.a,{}),Object(j.jsx)(f,{gameOver:J,setGameOver:M,resetBoardFunc:ne,undoFunc:ce}),Object(j.jsxs)(u.a,{container:!0,className:"side-padding",children:[Object(j.jsxs)(u.a,{container:!0,item:!0,xs:8,children:[Object(j.jsx)(ue,{score:d,highScore:x,resetBoardFunc:ne,undoFunc:ce}),Object(j.jsx)($,{items:a,deadItems:O,setDeadItems:_,setGameOver:M})]}),Object(j.jsx)(u.a,{item:!0,xs:4,children:Object(j.jsx)(pe,{leaderboard:U,username:ae})})]})]})})},Se=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,168)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),r(e),n(e),c(e),s(e)}))};s.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(ge,{})}),document.getElementById("root")),Se()},28:function(e,t,a){e.exports={item:"Sidebar_item__3zPF1",container:"Sidebar_container__3CgDZ",header:"Sidebar_header__ozhuF",no_padding:"Sidebar_no_padding__ae2sm",little_padding:"Sidebar_little_padding__3-euM",header_container:"Sidebar_header_container__13qMT",max_width:"Sidebar_max_width__303kD",colour_white:"Sidebar_colour_white__3F1E8"}},53:function(e,t,a){e.exports={tileColour:"var(--quaternary-main)",box:"GridItem_box__2-38H",text:"GridItem_text__2lY2m"}},58:function(e,t,a){e.exports={header:"GameOver_header__b2OR4",on_top:"GameOver_on_top__1-FZG"}},59:function(e,t,a){e.exports={box:"Grid2048_box__21wtm",container:"Grid2048_container__3a0rY"}},94:function(e,t,a){},95:function(e,t,a){}},[[121,1,2]]]);
//# sourceMappingURL=main.ca2becf0.chunk.js.map