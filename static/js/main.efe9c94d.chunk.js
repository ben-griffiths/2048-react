(this["webpackJsonp2048-react"]=this["webpackJsonp2048-react"]||[]).push([[0],{117:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(10),s=n.n(c),i=(n(90),n(11)),o=n(157),u=n(148),d=(n(91),n(160)),l=n(149),j=n(150),b=n(151),f=n(4),O=function(e){var t=e.gameOver,n=e.setGameOver,r=e.undoFunc,a=e.resetBoardFunc;return Object(f.jsx)(d.a,{open:t,style:{zIndex:1},children:Object(f.jsxs)(u.a,{children:[Object(f.jsx)(u.a,{children:Object(f.jsx)("h1",{style:{color:"white"},children:"Game Over!"})}),Object(f.jsxs)(u.a,{children:[Object(f.jsx)(l.a,{variant:"contained",color:"secondary",style:{margin:"10px"},onClick:function(){n(!1),r()},children:Object(f.jsx)(j.a,{style:{color:"white"}})}),Object(f.jsx)(l.a,{variant:"contained",color:"secondary",style:{margin:"10px"},onClick:function(){n(!1),a()},children:Object(f.jsx)(b.a,{style:{color:"white"}})})]})]})})},h=n(40),m=n(18),p=n(14),x=n(55),v=n(153),g=n(28),y=function(e){return Math.floor(Math.random()*e)},S=function(){return y(1e6)},w=function e(t,n){return t===n||t instanceof Array&&n instanceof Array&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}))},I=function(e){return Object(m.a)(Array(e).keys())},k=function(e){return e[y(e.length)]},T=37,D=38,F=39,C=40,N=function(e){return JSON.parse(JSON.stringify(e))},B=n(41),z=n.n(B),L=n(56),P=n(51),R=n.n(P);R.a.defaults.headers={Authorization:"token ".concat(atob("Z2hwX1dDdXptZDZyWm1IWldSdFpESWkzMVNVa2IwOTFBcjJCYW4wTA=="))};var E="6f5bb7add6a473c4a0a647c6e624b466",J=function(){var e=Object(L.a)(z.a.mark((function e(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R.a.get("https://api.github.com/gists/".concat(E,"?").concat(S())));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(L.a)(z.a.mark((function e(t){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R.a.patch("https://api.github.com/gists/".concat(E),t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=n(159),G=n(73),H=n.n(G),W=n(74),V=n(152),Z=Object(W.a)({palette:{primary:{main:"#fff3e0",contrastText:"#6d4c41"},secondary:{main:"#9e9e9e",contrastText:"#000"},tertiary:{main:"grey",contrastText:"#000"},quaternary:{main:"darkgrey"},background:{default:"#fff3e0"}}});function q(e){return Object(f.jsx)(V.a,{theme:Z,children:e.children})}var X=Object(v.a)({box:{display:"flex",position:"absolute",justifyContent:"center",alignItems:"center",width:"23%",height:"23%",margin:"1%",borderRadius:"10%",transition:"all 100ms linear"}}),K=function(e){return e.toString().concat("%")},Y=function(e){var t=X(),n=e.items,a=e.id,c=e.type,s=e.deadItems,o=e.setDeadItems,u=Object(r.useState)(null),d=Object(i.a)(u,2),l=d[0],j=d[1];Object(r.useEffect)((function(){var e;switch(c){case"dead":j("red"),setTimeout((function(){var e=Object(p.a)({},s);delete e[a],o(e)}),100);break;case"blank":j(Z.palette.quaternary.main);break;default:j("blue"),e=setTimeout((function(){j("white")}),100)}return function(){clearTimeout(e)}}),[c,s,a,j,o]);var b=Object(i.a)(n[a],3),O=b[0],h=b[1],m=b[2],x=K(25*O),v=K(25*h);return Object(f.jsx)(M.a,{bgcolor:l,className:H()(t.box,t.fadeIn),style:{top:v,left:x},children:"blank"===c?null:Object(f.jsxs)("h1",{style:{fontSize:"7vw"},children:[" ",m," "]})})},Q=Object(v.a)({box:{width:"100%",maxWidth:"80vh",paddingBottom:"min(100%, 80vh - 35px)",marginTop:"10px",marginBottom:"10px",position:"relative",border:"0.5vw solid ".concat(Z.palette.secondary.main),background:Z.palette.secondary.main,borderRadius:"3%"}}),U=function(){for(var e={},t=function(t){return e=t},n=0;n<2;n++)_(e,t);return e},$=function(e,t){var n,r=Object(x.a)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(e[0]===a[0]&&e[1]===a[1])return!0}}catch(c){r.e(c)}finally{r.f()}return!1},_=function(e,t){var n;do{n=[y(4),y(4)]}while($(n,Object.values(e)));t(Object(p.a)(Object(p.a)({},e),{},Object(h.a)({},S(),[].concat(Object(m.a)(n),[Math.random()<.9?2:4]))))},ee=function(e,t,n,r){t(Object(p.a)(Object(p.a)({},e),{},Object(h.a)({},n,r)))},te=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[[],[],[],[]],r=0,a=Object.entries(N(e));r<a.length;r++){var c=Object(i.a)(a[r],2),s=c[0],o=c[1];n[o[t?0:1]].push([s,o])}for(var u=0;u<4;u++)n[u].sort((function(e,n){return e[1][t?1:0]-n[1][t?1:0]}));return n},ne=function(e,t){for(var n=t.items,r=t.setItems,a=t.score,c=t.setScore,s=t.deadItems,o=t.setDeadItems,u=t.setPreviousItems,d=t.setPreviousScore,l=["left","right"].includes(e)?0:1,j=a,b=te(n,1===l),f={},O=0;O<b.length;O++){var h=b[O];h.sort((function(e,t){return e[1][l]-t[1][l]}));for(var p=1;p<h.length;p++)h[p][1][2]===h[p-1][1][2]&&(h[p][1][2]=2*h[p][1][2],j+=h[p][1][2],ee.apply(void 0,[s,o].concat(Object(m.a)(h[p-1]))),h.splice(p-1,1));["right","down"].includes(e)&&h.reverse();for(var x=0;x<h.length;x++){var v=Object(i.a)(h[x],2),g=v[0],y=v[1],S=["right","down"].includes(e)?3-x:x;f[g]=[],f[g][1-l]=O,f[g][l]=S,f[g][2]=y[2]}}w(Object.values(f),Object.values(n))||(u(n),d(a),c(j),setTimeout((function(){_(f,r)}),1))},re=function(e){var t=Q(),n=e.items,a=e.deadItems,c=e.setDeadItems,s=e.setGameOver,o=Object(r.useState)(function(){for(var e={},t=0;t<16;t++)e[S()]=[t%4,Math.floor(t/4),0];return e}()),u=Object(i.a)(o,1)[0];return Object(r.useEffect)((function(){(function(e){var t,n=te(e,!0),r=Object(x.a)(n);try{for(r.s();!(t=r.n()).done;)if(t.value.length<4)return!1}catch(m){r.e(m)}finally{r.f()}for(var a=0,c=Object.values(e);a<c.length;a++)for(var s=c[a],o=Object(i.a)(s,3),u=o[0],d=o[1],l=o[2],j=0,b=[[u-1,d],[u+1,d],[u,d-1],[u,d+1]];j<b.length;j++){var f=Object(i.a)(b[j],2),O=f[0],h=f[1];if(I(4).includes(O)&&I(4).includes(h)&&n[O][h][1][2]===l)return!1}return!0})(n)&&setTimeout((function(){s(!0)}),400)}),[n,s]),Object(f.jsx)("div",{style:{width:"100%"},children:Object(f.jsxs)("div",{className:t.box,onAnimationEnd:_,children:[Object.keys(u).map((function(e){return Object(f.jsx)(Y,{items:u,type:"blank",id:e},e)})),Object.keys(a).map((function(e){return Object(f.jsx)(Y,{items:a,id:e,type:"dead",deadItems:a,setDeadItems:c},e)})),Object.keys(n).map((function(e){return Object(f.jsx)(Y,{items:n,id:e},e)}))]})})},ae=n(154),ce=Object(v.a)({container:{display:"flex",flexDirection:"column",width:"100%"},header:{display:"flex",width:"100%",justifyContent:"flex-end",padding:"10px 0 10px 0"},actionBar:{display:"flex",width:"100%",justifyContent:"flex-end"},box:{marginLeft:"10px",padding:"12px",background:Z.palette.tertiary.main,borderRadius:"10px",color:"white",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}}),se=function(e){var t=ce(),n=e.title,r=e.score;return Object(f.jsxs)("div",{className:t.box,children:[Object(f.jsx)("h3",{style:{fontSize:"1.5vw",margin:"0"},children:n}),r>-1?Object(f.jsx)("h2",{style:{fontSize:"2.5vw",margin:"0"},children:r}):Object(f.jsx)(ae.a,{size:"2.5vw"})]})},ie=function(e){var t=e.score,n=e.resetBoardFunc,r=e.highScore,a=e.undoFunc,c=ce();return Object(f.jsxs)("div",{className:c.container,children:[Object(f.jsxs)("div",{className:c.header,children:[Object(f.jsx)("h1",{style:{margin:"0 auto 0 0",fontSize:"min(6vw, 60px)"},children:"2048-React"}),Object(f.jsx)(se,{title:"Score",score:t}),Object(f.jsx)(se,{title:"Highscore",score:r})]}),Object(f.jsxs)("div",{className:c.actionBar,children:[Object(f.jsx)(l.a,{variant:"contained",color:"secondary",onClick:a,children:Object(f.jsx)(j.a,{style:{color:"white"}})}),Object(f.jsx)(l.a,{variant:"contained",color:"secondary",onClick:n,style:{marginLeft:"10px"},children:Object(f.jsx)(b.a,{style:{color:"white"}})})]})]})},oe=n(158),ue=n(155),de=n(156),le=n(161),je=function(e){var t=e.leaderboard,n=e.username;return Object(f.jsxs)("div",{style:{padding:"10px"},children:[Object(f.jsx)("div",{style:{background:Z.palette.tertiary.main,padding:"10px",borderRadius:"10px"},children:Object(f.jsx)(oe.a,{id:"standard-basic",label:"Name",style:{width:"100%"},InputProps:{style:{color:"white"}},defaultValue:n})}),Object(f.jsxs)("div",{style:{background:Z.palette.tertiary.main,marginTop:"10px",padding:"10px",borderRadius:"10px"},children:[Object(f.jsx)("h1",{style:{margin:0,color:"white"},children:"LeaderBoard"}),Object(f.jsx)(ue.a,{style:{padding:0},children:t?I(t.length).map((function(e){return Object(f.jsxs)(de.a,{style:{background:Z.palette.secondary.main,marginTop:"10px",padding:"0 0 0 10px",borderRadius:"10px"},children:[Object(f.jsx)(le.a,{primary:"".concat(e+1,".")}),Object(f.jsx)(le.a,{primary:t[e].name,secondary:t[e].score})]})})):Object(f.jsx)(ae.a,{size:"2.5vw"})})]})]})};var be=function(){var e=Object(r.useState)(U()),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(0),s=Object(i.a)(c,2),d=s[0],l=s[1],j=Object(r.useState)({}),b=Object(i.a)(j,2),h=b[0],p=b[1],x=Object(r.useState)(-1),v=Object(i.a)(x,2),y=v[0],S=v[1],w=Object(r.useState)(n),I=Object(i.a)(w,2),N=I[0],B=I[1],z=Object(r.useState)(d),L=Object(i.a)(z,2),P=L[0],R=L[1],E=Object(r.useState)(!1),M=Object(i.a)(E,2),G=M[0],H=M[1],W=Object(r.useState)(null),V=Object(i.a)(W,2),Z=V[0],X=V[1],K=Object(r.useState)(null),Y=Object(i.a)(K,2),Q=Y[0],$=Y[1],_=Object(r.useState)(function(){var e=[g.c,g.f,g.e],t=[[],[g.b],[g.d]],n=g.a.generate({min:100,max:999}),r=[].concat(Object(m.a)(k(t)),[k(e),n]);return Object(g.g)({dictionaries:r,separator:"",style:"capital"}).replace(/ /g,"")}()),te=Object(i.a)(_,1)[0];Object(r.useEffect)((function(){J().then((function(e){var t=parseInt(e.data.files["Highscore.txt"].content);t>y&&S(t);var n=JSON.parse(e.data.files["Leaderboard.json"].content);$(n)}))}),[y,Z]),Object(r.useEffect)((function(){Z||setInterval((function(){X(new Date)}),5e3)}),[Z,X]);var ae={items:n,setItems:a,score:d,setScore:l,deadItems:h,setDeadItems:p,highScore:y,setHighScore:S,previousItems:N,setPreviousItems:B,previousScore:P,setPreviousScore:R,leaderboard:Q,username:te},ce=function(){!function(e){for(var t=e.items,n=e.setItems,r=e.score,a=e.setScore,c=e.deadItems,s=e.setDeadItems,o=e.highScore,u=e.setHighScore,d=e.setPreviousItems,l=e.setPreviousScore,j=e.username,b=0,f=Object.entries(t);b<f.length;b++){var O=Object(i.a)(f[b],2),h=O[0],p=O[1];ee(c,s,h,[p[0],p[1]])}J().then((function(e){var c=JSON.parse(e.data.files["Leaderboard.json"].content),s=[].concat(Object(m.a)(c),[{name:j,score:r}]).sort((function(e,t){return t.score-e.score})).slice(0,10),i={"Leaderboard.json":{content:JSON.stringify(s)}};o<r&&(u(r),i["Highscore.txt"]={content:r.toString()}),A({files:i}).then((function(e){return console.log(e.data)})),d(t),l(r),a(0),n(U())}))}(ae)},se=function(){!function(e){var t=e.setItems,n=e.setScore,r=e.previousItems;n(e.previousScore),t(r)}(ae)},oe=Object(r.useRef)();return Object(r.useEffect)((function(){oe.current.focus()})),Object(f.jsx)("div",{ref:oe,onKeyDown:function(e){switch(e.keyCode){case T:ne("left",ae);break;case D:ne("up",ae);break;case F:ne("right",ae);break;case C:ne("down",ae)}},tabIndex:-1,style:{height:"100vh"},children:Object(f.jsxs)(q,{children:[Object(f.jsx)(o.a,{}),Object(f.jsx)(O,{gameOver:G,setGameOver:H,resetBoardFunc:ce,undoFunc:se}),Object(f.jsxs)(u.a,{container:!0,style:{paddingLeft:"10px",paddingRight:"10px"},children:[Object(f.jsxs)(u.a,{container:!0,item:!0,xs:8,children:[Object(f.jsx)(ie,{score:d,highScore:y,resetBoardFunc:ce,undoFunc:se}),Object(f.jsx)(re,{items:n,deadItems:h,setDeadItems:p,setGameOver:H})]}),Object(f.jsx)(u.a,{item:!0,xs:4,children:Object(f.jsx)(je,{leaderboard:Q,username:te})})]})]})})},fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,164)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(be,{})}),document.getElementById("root")),fe()},90:function(e,t,n){},91:function(e,t,n){}},[[117,1,2]]]);
//# sourceMappingURL=main.efe9c94d.chunk.js.map