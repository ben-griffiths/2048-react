(this["webpackJsonp2048-react"]=this["webpackJsonp2048-react"]||[]).push([[0],{116:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(10),s=n.n(c),i=(n(89),n(11)),o=n(156),u=n(157),d=(n(90),n(160)),l=n(4),j=function(e){var t=e.gameOver;return Object(l.jsx)(d.a,{open:t,style:{zIndex:1},children:Object(l.jsx)("h1",{style:{color:"white",fontSize:"6vw",textShadow:"3px 3px #000000"},children:"Game Over!"})})},b=n(40),f=n(18),O=n(14),h=n(55),m=n(149),p=n(28),x=function(e){return Math.floor(Math.random()*e)},v=function(){return x(1e6)},g=function e(t,n){return t===n||t instanceof Array&&n instanceof Array&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}))},y=function(e){return Object(f.a)(Array(e).keys())},S=function(e){return e[x(e.length)]},w=37,I=38,k=39,T=40,D=function(e){return JSON.parse(JSON.stringify(e))},N=n(41),F=n.n(N),z=n(56),B=n(51),C=n.n(B);C.a.defaults.headers={Authorization:"token ".concat(atob("Z2hwX1dDdXptZDZyWm1IWldSdFpESWkzMVNVa2IwOTFBcjJCYW4wTA=="))};var L="6f5bb7add6a473c4a0a647c6e624b466",P=function(){var e=Object(z.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C.a.get("https://api.github.com/gists/".concat(L,"?").concat(v())));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(z.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C.a.patch("https://api.github.com/gists/".concat(L),t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=n(159),J=n(73),A=n.n(J),G=n(74),M=n(148),H=Object(G.a)({palette:{primary:{main:"#fff3e0",contrastText:"#6d4c41"},secondary:{main:"#9e9e9e",contrastText:"#000"},tertiary:{main:"grey",contrastText:"#000"},quaternary:{main:"darkgrey"},background:{default:"#fff3e0"}}});function W(e){return Object(l.jsx)(M.a,{theme:H,children:e.children})}var V=Object(m.a)({box:{display:"flex",position:"absolute",justifyContent:"center",alignItems:"center",width:"23%",height:"23%",margin:"1%",borderRadius:"10%",transition:"all 100ms linear"}}),Z=function(e){return e.toString().concat("%")},q=function(e){var t=V(),n=e.items,a=e.id,c=e.type,s=e.deadItems,o=e.setDeadItems,u=Object(r.useState)(null),d=Object(i.a)(u,2),j=d[0],b=d[1];Object(r.useEffect)((function(){var e;switch(c){case"dead":b("red"),setTimeout((function(){var e=Object(O.a)({},s);delete e[a],o(e)}),100);break;case"blank":b(H.palette.quaternary.main);break;default:b("blue"),e=setTimeout((function(){b("white")}),100)}return function(){clearTimeout(e)}}),[c,s,a,b,o]);var f=Object(i.a)(n[a],3),h=f[0],m=f[1],p=f[2],x=Z(25*h),v=Z(25*m);return Object(l.jsx)(E.a,{bgcolor:j,className:A()(t.box,t.fadeIn),style:{top:v,left:x},children:"blank"===c?null:Object(l.jsxs)("h1",{style:{fontSize:"7vw"},children:[" ",p," "]})})},X=Object(m.a)({box:{width:"100%",maxWidth:"80vh",paddingBottom:"min(100%, 80vh - 35px)",marginTop:"10px",marginBottom:"10px",position:"relative",border:"0.5vw solid ".concat(H.palette.secondary.main),background:H.palette.secondary.main,borderRadius:"3%"}}),K=function(){for(var e={},t=function(t){return e=t},n=0;n<2;n++)Q(e,t);return e},Y=function(e,t){var n,r=Object(h.a)(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(e[0]===a[0]&&e[1]===a[1])return!0}}catch(c){r.e(c)}finally{r.f()}return!1},Q=function(e,t){var n;do{n=[x(4),x(4)]}while(Y(n,Object.values(e)));t(Object(O.a)(Object(O.a)({},e),{},Object(b.a)({},v(),[].concat(Object(f.a)(n),[Math.random()<.9?2:4]))))},U=function(e,t,n,r){t(Object(O.a)(Object(O.a)({},e),{},Object(b.a)({},n,r)))},$=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[[],[],[],[]],r=0,a=Object.entries(D(e));r<a.length;r++){var c=Object(i.a)(a[r],2),s=c[0],o=c[1];n[o[t?0:1]].push([s,o])}for(var u=0;u<4;u++)n[u].sort((function(e,n){return e[1][t?1:0]-n[1][t?1:0]}));return n},_=function(e,t){for(var n=t.items,r=t.setItems,a=t.score,c=t.setScore,s=t.deadItems,o=t.setDeadItems,u=t.setPreviousItems,d=t.setPreviousScore,l=["left","right"].includes(e)?0:1,j=a,b=$(n,1===l),O={},h=0;h<b.length;h++){var m=b[h];m.sort((function(e,t){return e[1][l]-t[1][l]}));for(var p=1;p<m.length;p++)m[p][1][2]===m[p-1][1][2]&&(m[p][1][2]=2*m[p][1][2],j+=m[p][1][2],U.apply(void 0,[s,o].concat(Object(f.a)(m[p-1]))),m.splice(p-1,1));["right","down"].includes(e)&&m.reverse();for(var x=0;x<m.length;x++){var v=Object(i.a)(m[x],2),y=v[0],S=v[1],w=["right","down"].includes(e)?3-x:x;O[y]=[],O[y][1-l]=h,O[y][l]=w,O[y][2]=S[2]}}g(Object.values(O),Object.values(n))||(u(n),d(a),c(j),setTimeout((function(){Q(O,r)}),1))},ee=function(e){var t=X(),n=e.items,a=e.deadItems,c=e.setDeadItems,s=e.setGameOver,o=Object(r.useState)(function(){for(var e={},t=0;t<16;t++)e[v()]=[t%4,Math.floor(t/4),0];return e}()),u=Object(i.a)(o,1)[0];return Object(r.useEffect)((function(){(function(e){var t,n=$(e,!0),r=Object(h.a)(n);try{for(r.s();!(t=r.n()).done;)if(t.value.length<4)return!1}catch(p){r.e(p)}finally{r.f()}for(var a=0,c=Object.values(e);a<c.length;a++)for(var s=c[a],o=Object(i.a)(s,3),u=o[0],d=o[1],l=o[2],j=0,b=[[u-1,d],[u+1,d],[u,d-1],[u,d+1]];j<b.length;j++){var f=Object(i.a)(b[j],2),O=f[0],m=f[1];if(y(4).includes(O)&&y(4).includes(m)&&n[O][m][1][2]===l)return!1}return!0})(n)&&setTimeout((function(){s(!0)}),400)}),[n,s]),Object(l.jsx)("div",{style:{width:"100%"},children:Object(l.jsxs)("div",{className:t.box,onAnimationEnd:Q,children:[Object.keys(u).map((function(e){return Object(l.jsx)(q,{items:u,type:"blank",id:e},e)})),Object.keys(a).map((function(e){return Object(l.jsx)(q,{items:a,id:e,type:"dead",deadItems:a,setDeadItems:c},e)})),Object.keys(n).map((function(e){return Object(l.jsx)(q,{items:n,id:e},e)}))]})})},te=n(150),ne=n(151),re=n(152),ae=n(153),ce=Object(m.a)({container:{display:"flex",flexDirection:"column",width:"100%"},header:{display:"flex",width:"100%",justifyContent:"flex-end",padding:"10px 0 10px 0"},actionBar:{display:"flex",width:"100%",justifyContent:"flex-end"},box:{marginLeft:"10px",padding:"12px",background:H.palette.tertiary.main,borderRadius:"10px",color:"white",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}}),se=function(e){var t=ce(),n=e.title,r=e.score;return Object(l.jsxs)("div",{className:t.box,children:[Object(l.jsx)("h3",{style:{fontSize:"1.5vw",margin:"0"},children:n}),r>-1?Object(l.jsx)("h2",{style:{fontSize:"2.5vw",margin:"0"},children:r}):Object(l.jsx)(te.a,{size:"2.5vw"})]})},ie=function(e){var t=e.score,n=e.resetBoardFunc,r=e.highScore,a=e.undoFunc,c=ce();return Object(l.jsxs)("div",{className:c.container,children:[Object(l.jsxs)("div",{className:c.header,children:[Object(l.jsx)("h1",{style:{margin:"0 auto 0 0",fontSize:"min(6vw, 60px)"},children:"2048-React"}),Object(l.jsx)(se,{title:"Score",score:t}),Object(l.jsx)(se,{title:"Highscore",score:r})]}),Object(l.jsxs)("div",{className:c.actionBar,children:[Object(l.jsx)(ne.a,{variant:"contained",color:"secondary",onClick:a,children:Object(l.jsx)(re.a,{style:{color:"white"}})}),Object(l.jsx)(ne.a,{variant:"contained",color:"secondary",onClick:n,style:{marginLeft:"10px",zIndex:10},children:Object(l.jsx)(ae.a,{style:{color:"white"}})})]})]})},oe=n(158),ue=n(154),de=n(155),le=n(161),je=function(e){var t=e.leaderboard,n=e.username;return Object(l.jsxs)("div",{style:{padding:"10px"},children:[Object(l.jsx)("div",{style:{background:H.palette.tertiary.main,padding:"10px",borderRadius:"10px"},children:Object(l.jsx)(oe.a,{id:"standard-basic",label:"Name",style:{width:"100%"},InputProps:{style:{color:"white"}},defaultValue:n})}),Object(l.jsxs)("div",{style:{background:H.palette.tertiary.main,marginTop:"10px",padding:"10px",borderRadius:"10px"},children:[Object(l.jsx)("h1",{style:{margin:0,color:"white"},children:"LeaderBoard"}),Object(l.jsx)(ue.a,{style:{padding:0},children:t?y(t.length).map((function(e){return Object(l.jsxs)(de.a,{style:{background:H.palette.secondary.main,marginTop:"10px",padding:"0 0 0 10px",borderRadius:"10px"},children:[Object(l.jsx)(le.a,{primary:"".concat(e+1,".")}),Object(l.jsx)(le.a,{primary:t[e].name,secondary:t[e].score})]})})):Object(l.jsx)(te.a,{size:"2.5vw"})})]})]})};var be=function(){var e=Object(r.useState)(K()),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(0),s=Object(i.a)(c,2),d=s[0],b=s[1],O=Object(r.useState)({}),h=Object(i.a)(O,2),m=h[0],x=h[1],v=Object(r.useState)(-1),g=Object(i.a)(v,2),y=g[0],D=g[1],N=Object(r.useState)(n),F=Object(i.a)(N,2),z=F[0],B=F[1],C=Object(r.useState)(d),L=Object(i.a)(C,2),E=L[0],J=L[1],A=Object(r.useState)(!1),G=Object(i.a)(A,2),M=G[0],H=G[1],V=Object(r.useState)(null),Z=Object(i.a)(V,2),q=Z[0],X=Z[1],Y=Object(r.useState)(null),Q=Object(i.a)(Y,2),$=Q[0],te=Q[1],ne=Object(r.useState)(function(){var e=[p.c,p.f,p.e],t=[[],[p.b],[p.d]],n=p.a.generate({min:100,max:999}),r=[].concat(Object(f.a)(S(t)),[S(e),n]);return Object(p.g)({dictionaries:r,separator:"",style:"capital"}).replace(/ /g,"")}()),re=Object(i.a)(ne,1)[0];Object(r.useEffect)((function(){P().then((function(e){var t=parseInt(e.data.files["Highscore.txt"].content);t>y&&D(t);var n=JSON.parse(e.data.files["Leaderboard.json"].content);te(n)}))}),[y,q]),Object(r.useEffect)((function(){q||setInterval((function(){X(new Date)}),5e3)}),[q,X]);var ae={items:n,setItems:a,score:d,setScore:b,deadItems:m,setDeadItems:x,highScore:y,setHighScore:D,previousItems:z,setPreviousItems:B,previousScore:E,setPreviousScore:J,leaderboard:$,username:re,setGameOver:H},ce=function(){!function(e){for(var t=e.items,n=e.setItems,r=e.score,a=e.setScore,c=e.deadItems,s=e.setDeadItems,o=e.highScore,u=e.setHighScore,d=e.setPreviousItems,l=e.setPreviousScore,j=e.username,b=e.setGameOver,O=0,h=Object.entries(t);O<h.length;O++){var m=Object(i.a)(h[O],2),p=m[0],x=m[1];U(c,s,p,[x[0],x[1]])}P().then((function(e){var c=JSON.parse(e.data.files["Leaderboard.json"].content),s=[].concat(Object(f.a)(c),[{name:j,score:r}]).sort((function(e,t){return t.score-e.score})).slice(0,10),i={"Leaderboard.json":{content:JSON.stringify(s)}};o<r&&(u(r),i["Highscore.txt"]={content:r.toString()}),R({files:i}).then((function(e){return console.log(e.data)})),b(!1),d(t),l(r),a(0),n(K())}))}(ae)},se=function(){!function(e){var t=e.setItems,n=e.setScore,r=e.previousItems;n(e.previousScore),t(r)}(ae)},oe=Object(r.useRef)();return Object(r.useEffect)((function(){oe.current.focus()})),Object(l.jsx)("div",{ref:oe,onKeyDown:function(e){switch(e.keyCode){case w:_("left",ae);break;case I:_("up",ae);break;case k:_("right",ae);break;case T:_("down",ae)}},tabIndex:-1,style:{height:"100vh"},children:Object(l.jsxs)(W,{children:[Object(l.jsx)(o.a,{}),Object(l.jsx)(j,{gameOver:M,setGameOver:H,resetBoardFunc:ce,undoFunc:se}),Object(l.jsxs)(u.a,{container:!0,style:{paddingLeft:"10px",paddingRight:"10px"},children:[Object(l.jsxs)(u.a,{container:!0,item:!0,xs:8,children:[Object(l.jsx)(ie,{score:d,highScore:y,resetBoardFunc:ce,undoFunc:se}),Object(l.jsx)(ee,{items:n,deadItems:m,setDeadItems:x,setGameOver:H})]}),Object(l.jsx)(u.a,{item:!0,xs:4,children:Object(l.jsx)(je,{leaderboard:$,username:re})})]})]})})},fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,164)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(be,{})}),document.getElementById("root")),fe()},89:function(e,t,n){},90:function(e,t,n){}},[[116,1,2]]]);
//# sourceMappingURL=main.bc7cce1e.chunk.js.map